Face Recognition - API,,,,,,,,,
,,,,,,,,,
서비스명,,Face Recognition Registration Detection,,,,,,,
설명,,회원 등록용 얼굴 검출 및 품질 검증 (DB 저장 안함),,,,,,,
Python API,,localhost:5002/api/face/detect_for_registration,,,,,,,
PHP Proxy,,/FaceTest/recognize_for_registration,,,,,,,
메소드,,POST,,,,,,,
용도,,회원 등록 시 얼굴 품질 체크 및 각도 분석,,,,,,,
응답코드,,항상 HTTP 200 반환 (성공/실패는 JSON success 필드로 구분),,,,,,,
,,,,,,,,,
REQUEST PARAMETER,,,,,,,,,
NO,항목명,크기,영문명,입력,출력,설명,,,
1,이미지,TEXT,image,●,,Base64 인코딩된 이미지,,,
2,회사코드,STRING(20),param1,○,,회사 코드 (필터링용),,,
3,지점코드,STRING(20),param2,○,,지점 코드 (필터링용),,,
,,,,,,,,,
RESPONSE DATA(JSON),,,,,,,,,
NO,항목명,크기,영문명,입력,출력,설명,,,
1,성공여부,BOOLEAN,success,,●,등록 가능 여부 (suitable_for_registration과 동일),,,
2,얼굴검출,BOOLEAN,face_detected,,●,얼굴 검출 여부,,,
3,등록적합성,BOOLEAN,suitable_for_registration,,●,등록 적합 여부,,,
4,얼굴인코딩,ARRAY,face_encoding,,○,512차원 얼굴 벡터 (성공 시),,,
5,품질점수,FLOAT,quality_score,,●,얼굴 품질 점수 (0.0-1.0),,,
6,얼굴각도,OBJECT,face_pose,,○,얼굴 각도 정보 (얼굴 검출 시),,,
6-1,좌우각도,FLOAT,yaw,,●,좌우 회전 각도 (-30 ~ +30),,,
6-2,상하각도,FLOAT,pitch,,●,상하 회전 각도 (-30 ~ +30),,,
6-3,기울기,FLOAT,roll,,●,머리 기울기 각도,,,
6-4,정면여부,BOOLEAN,is_frontal,,●,정면 여부 (|yaw|≤15 & |pitch|≤15 & |roll|≤10),,,
7,품질상세,OBJECT,quality_details,,○,품질 상세 정보 (얼굴 검출 시),,,
7-1,얼굴크기비율,FLOAT,face_size_ratio,,●,화면 대비 얼굴 크기 비율 (0.15~0.7 권장),,,
7-2,중앙위치,BOOLEAN,face_centered,,●,얼굴 중앙 위치 여부 (40% 영역 내),,,
7-3,검출신뢰도,FLOAT,detection_confidence,,●,얼굴 검출 신뢰도 (0.0-1.0),,,
7-4,전체품질점수,FLOAT,overall_quality_score,,●,종합 품질 점수 (0.0-1.0),,,
8,처리시간,NUMBER,processing_time_ms,,●,처리 시간 (밀리초),,,
9,권장사항,ARRAY,recommendations,,●,개선 권장사항 목록,,,
10,에러코드,STRING,error_code,,○,에러 코드 (실패 시),,,
11,에러메시지,STRING,error_message,,○,상세 에러 메시지 (실패 시),,,
,,,,,,,,,
에러 코드 목록,,,,,,,,,
코드,설명,,,,,,,,
NO_FACE_DETECTED,얼굴이 검출되지 않음,,,,,,,,
MULTIPLE_FACES_DETECTED,여러 얼굴이 검출됨,,,,,,,,
FACE_ANGLE_YAW,좌우 각도가 허용 범위 초과 (±15도),,,,,,,,
FACE_ANGLE_PITCH,상하 각도가 허용 범위 초과 (±15도),,,,,,,,
FACE_ANGLE_ROLL,기울기가 허용 범위 초과 (±10도),,,,,,,,
FACE_TOO_SMALL,얼굴 크기가 너무 작음 (<15%),,,,,,,,
FACE_TOO_LARGE,얼굴 크기가 너무 큼 (>70%),,,,,,,,
FACE_NOT_CENTERED,얼굴이 중앙에 위치하지 않음,,,,,,,,
LOW_DETECTION_CONFIDENCE,얼굴 검출 신뢰도가 낮음 (<0.8),,,,,,,,
LOW_QUALITY_SCORE,전체 품질 점수가 낮음 (<0.7),,,,,,,,
NO_IMAGE_PROVIDED,이미지 파일이 제공되지 않음,,,,,,,,
MISSING_IMAGE_DATA,이미지 데이터가 없음,,,,,,,,
PROCESSING_ERROR,이미지 처리 중 오류 발생,,,,,,,,
,,,,,,,,,
응답 예시 (성공 - 등록 가능) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": true,,,,,,,,,
  "face_encoding": [0.123 ... 512개 숫자],,,,,,,,,
  "quality_score": 0.85,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": -5.2,,,,,,,,,
    "pitch": 2.1,,,,,,,,,
    "roll": 0.8,,,,,,,,,
    "is_frontal": true,,,,,,,,,
  },,,,,,,,,
  "quality_details": {,,,,,,,,,
    "face_size_ratio": 0.35,,,,,,,,,
    "face_centered": true,,,,,,,,,
    "detection_confidence": 0.92,,,,,,,,,
    "overall_quality_score": 0.88,,,,,,,,,
  },,,,,,,,,
  "processing_time_ms": 245,,,,,,,,,
  "recommendations": [],,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (실패 - 얼굴 각도 부적합) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": false,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.75,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": 25.5,,,,,,,,,
    "pitch": -18.2,,,,,,,,,
    "roll": 12.3,,,,,,,,,
    "is_frontal": false,,,,,,,,,
  },,,,,,,,,
  "quality_details": {,,,,,,,,,
    "face_size_ratio": 0.45,,,,,,,,,
    "face_centered": true,,,,,,,,,
    "detection_confidence": 0.90,,,,,,,,,
    "overall_quality_score": 0.75,,,,,,,,,
  },,,,,,,,,
  "recommendations": [,,,,,,,,,
    "정면을 바라봐주세요.",,,,,,,,,
    "고개를 조금 들어주세요.",,,,,,,,,
    "고개를 똑바로 세워주세요.",,,,,,,,,
  ],,,,,,,,,
  "processing_time_ms": 210,,,,,,,,,
  "error_code": "FACE_ANGLE_YAW,FACE_ANGLE_PITCH,FACE_ANGLE_ROLL",,,,,,,,,
  "error_message": "Face detected but not suitable for registration",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (실패 - 얼굴 미검출) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": false,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 145,,,,,,,,,
  "recommendations": ["얼굴이 감지되지 않았습니다. 카메라를 정면으로 바라봐주세요."],,,,,,,,,
  "error_code": "NO_FACE_DETECTED",,,,,,,,,
  "error_message": "No face detected",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (실패 - 다중 얼굴) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": false,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 178,,,,,,,,,
  "recommendations": ["여러 얼굴이 감지되었습니다. 한 명만 촬영해주세요."],,,,,,,,,
  "error_code": "MULTIPLE_FACES_DETECTED",,,,,,,,,
  "error_message": "Multiple faces detected",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (실패 - 얼굴 크기 부적합) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": false,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.65,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": 2.1,,,,,,,,,
    "pitch": 1.5,,,,,,,,,
    "roll": 0.3,,,,,,,,,
    "is_frontal": true,,,,,,,,,
  },,,,,,,,,
  "quality_details": {,,,,,,,,,
    "face_size_ratio": 0.08,,,,,,,,,
    "face_centered": true,,,,,,,,,
    "detection_confidence": 0.85,,,,,,,,,
    "overall_quality_score": 0.65,,,,,,,,,
  },,,,,,,,,
  "recommendations": ["카메라에 더 가까이 와주세요."],,,,,,,,,
  "processing_time_ms": 195,,,,,,,,,
  "error_code": "FACE_TOO_SMALL",,,,,,,,,
  "error_message": "Face detected but not suitable for registration",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (실패 - 이미지 처리 오류) [HTTP 200],,,,,,,,,
{,,,,,,,,,
  "success": false,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 0,,,,,,,,,
  "recommendations": ["이미지 처리 중 오류가 발생했습니다. 다시 시도해주세요."],,,,,,,,,
  "error_code": "PROCESSING_ERROR",,,,,,,,,
  "error_message": "Image decoding error",,,,,,,,,
},,,,,,,,,