Face Recognition - API,,,,,,,,,
,,,,,,,,,
서비스명,,Face Recognition Registration Detection,,,,,,,
설명,,회원 등록용 얼굴 검출 및 품질 검증 (DB 저장 안함),,,,,,,
Python API,,localhost:5002/api/face/detect_for_registration,,,,,,,
PHP Proxy,,/FaceTest/recognize_for_registration,,,,,,,
메소드,,POST,,,,,,,
용도,,회원 등록 시 얼굴 품질 체크 및 각도 분석,,,,,,,
REQUEST PARAMETER,,,,,,,,,
NO,항목명,크기,영문명,입력,출력,설명,,,
1,이미지,TEXT,image,●,,Base64 인코딩된 이미지,,,
2,회사코드,STRING(20),param1,○,,회사 코드 (필터링용),,,
3,지점코드,STRING(20),param2,○,,지점 코드 (필터링용),,,
,,,,,,,,,
RESPONSE DATA(JSON),,,,,,,,,
NO,항목명,크기,영문명,입력,출력,설명,,,
1,성공여부,BOOLEAN,success,,●,API 호출 성공 여부 (항상 true),,,
2,얼굴검출,BOOLEAN,face_detected,,●,얼굴 검출 여부,,,
3,등록적합성,BOOLEAN,suitable_for_registration,,●,등록 적합 여부,,,
4,얼굴인코딩,ARRAY,face_encoding,,○,512차원 얼굴 벡터 (face_detected=true인 경우),,,
5,품질점수,FLOAT,quality_score,,●,얼굴 품질 점수 (0.0-1.0),,,
6,얼굴각도,OBJECT,face_pose,,○,얼굴 각도 정보 (face_detected=true인 경우),,,
6-1,좌우각도,FLOAT,yaw,,●,좌우 회전 각도 (-30 ~ +30),,,
6-2,상하각도,FLOAT,pitch,,●,상하 회전 각도 (-30 ~ +30),,,
6-3,기울기,FLOAT,roll,,●,머리 기울기 각도,,,
6-4,정면여부,BOOLEAN,is_frontal,,●,정면 여부 (|yaw|≤15 & |pitch|≤15 & |roll|≤10),,,
7,품질상세,OBJECT,quality_details,,○,품질 상세 정보 (face_detected=true인 경우),,,
7-1,얼굴크기비율,FLOAT,face_size_ratio,,●,화면 대비 얼굴 크기 비율 (0.15~0.7 권장),,,
7-2,중앙위치,BOOLEAN,face_centered,,●,얼굴 중앙 위치 여부 (40% 영역 내),,,
7-3,검출신뢰도,FLOAT,detection_confidence,,●,얼굴 검출 신뢰도 (0.0-1.0),,,
7-4,전체품질점수,FLOAT,overall_quality_score,,●,종합 품질 점수 (0.0-1.0),,,
8,안경착용,BOOLEAN,glasses_detected,,○,안경 착용 여부 (현재 미사용),,,
9,안경신뢰도,FLOAT,glasses_confidence,,○,안경 감지 신뢰도 (현재 0.0),,,
10,Liveness점수,FLOAT,liveness_score,,○,생체 인증 점수 (0.0-1.0),,,
11,Liveness검사,OBJECT,liveness_check,,○,실제 얼굴 여부 검사,,,
11-1,실제얼굴,BOOLEAN,is_live,,●,실제 얼굴 여부,,,
11-2,신뢰도,FLOAT,confidence,,●,Liveness 신뢰도 (0.0-1.0),,,
11-3,상세정보,OBJECT,details,,●,검사 방법 상세,,,
12,보안경고,ARRAY,security_warnings,,○,보안 경고 목록,,,
13,얼굴속성,OBJECT,face_attributes,,○,얼굴 속성 정보,,,
13-1,나이,INTEGER,age,,●,추정 나이,,,
13-2,성별,STRING,gender,,●,추정 성별 (male/female/unknown),,,
14,처리시간,NUMBER,processing_time_ms,,●,처리 시간 (밀리초),,,
15,임베딩차원,NUMBER,embedding_dimensions,,○,벡터 차원수 (512),,,
16,랜드마크수,NUMBER,landmark_count,,○,검출된 얼굴 특징점 수 (5개),,,
17,권장사항,ARRAY,recommendations,,●,개선 권장사항 목록,,,
18,비고,STRING,notes,,○,디버깅용 추가 정보,,,
,,,,,,,,,
응답 예시 (성공),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": true,,,,,,,,,
  "face_encoding": [0.123 ... 512개 숫자],,,,,,,,,
  "quality_score": 0.85,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": -5.2,,,,,,,,,
    "pitch": 2.1,,,,,,,,,
    "roll": 0.8,,,,,,,,,
    "is_frontal": true,,,,,,,,,
  },,,,,,,,,
  "quality_details": {,,,,,,,,,
    "face_size_ratio": 0.35,,,,,,,,,
    "face_centered": true,,,,,,,,,
    "detection_confidence": 0.92,,,,,,,,,
    "overall_quality_score": 0.88,,,,,,,,,
  },,,,,,,,,
  "glasses_detected": false,,,,,,,,,
  "glasses_confidence": 0.0,,,,,,,,,
  "liveness_score": 0.75,,,,,,,,,
  "liveness_check": {,,,,,,,,,
    "is_live": true,,,,,,,,,
    "confidence": 0.75,,,,,,,,,
    "details": {,,,,,,,,,
      "method": "InsightFace Advanced Liveness Detection",,,,,,,,,
      "note": "Multi-factor liveness analysis (texture, frequency, color)",,,,,,,,,
    },,,,,,,,,
  },,,,,,,,,
  "security_warnings": [],,,,,,,,,
  "face_attributes": {,,,,,,,,,
    "age": 28,,,,,,,,,
    "gender": "male",,,,,,,,,
  },,,,,,,,,
  "processing_time_ms": 245,,,,,,,,,
  "embedding_dimensions": 512,,,,,,,,,
  "landmark_count": 5,,,,,,,,,
  "recommendations": [],,,,,,,,,
  "notes": "InsightFace 검출 - Quality: 0.85, Liveness: 0.75 (Pass)",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (얼굴 각도 부적합),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": 25.5,,,,,,,,,
    "pitch": -18.2,,,,,,,,,
    "roll": 12.3,,,,,,,,,
    "is_frontal": false,,,,,,,,,
  },,,,,,,,,
  "recommendations": [,,,,,,,,,
    "정면을 바라봐주세요.",,,,,,,,,
    "고개를 조금 들어주세요.",,,,,,,,,
    "고개를 똑바로 세워주세요.",,,,,,,,,
  ],,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (얼굴 미검출),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 145,,,,,,,,,
  "recommendations": ["얼굴이 감지되지 않았습니다. 카메라를 정면으로 바라봐주세요."],,,,,,,,,
  "notes": "No face detected",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (다중 얼굴),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 178,,,,,,,,,
  "recommendations": ["여러 얼굴이 감지되었습니다. 한 명만 촬영해주세요."],,,,,,,,,
  "notes": "Multiple faces detected",,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (얼굴 크기 부적합),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": true,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.65,,,,,,,,,
  "face_pose": {,,,,,,,,,
    "yaw": 2.1,,,,,,,,,
    "pitch": 1.5,,,,,,,,,
    "roll": 0.3,,,,,,,,,
    "is_frontal": true,,,,,,,,,
  },,,,,,,,,
  "quality_details": {,,,,,,,,,
    "face_size_ratio": 0.08,,,,,,,,,
    "face_centered": true,,,,,,,,,
    "detection_confidence": 0.85,,,,,,,,,
    "overall_quality_score": 0.65,,,,,,,,,
  },,,,,,,,,
  "recommendations": ["카메라에 더 가까이 와주세요."],,,,,,,,,
},,,,,,,,,
,,,,,,,,,
응답 예시 (이미지 처리 오류),,,,,,,,,
{,,,,,,,,,
  "success": true,,,,,,,,,
  "face_detected": false,,,,,,,,,
  "suitable_for_registration": false,,,,,,,,,
  "quality_score": 0.0,,,,,,,,,
  "processing_time_ms": 0,,,,,,,,,
  "recommendations": ["이미지 처리 중 오류가 발생했습니다. 다시 시도해주세요."],,,,,,,,,
  "notes": "Image decoding error",,,,,,,,,
},,,,,,,,,